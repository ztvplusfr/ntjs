(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{545:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var s=r(2501),a=r(5044),i=r(2156),n=r(8267),l=r(583);let o=(0,r(5143).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var c=r(3388),d=r(2997),u=r.n(d),m=r(5046),h=r(1308),g=r(7841),x=r(3806),p=r(1928),f=r(638),v=r(1188);function y(e){let{isOpen:t,onClose:r}=e,{data:a}=(0,h.useSession)(),[i,n]=(0,g.useState)(""),[l,o]=(0,g.useState)(null),[c,d]=(0,g.useState)(null),[u,m]=(0,g.useState)(!1),[y,b]=(0,g.useState)(""),[j,w]=(0,g.useState)(!1),N=async e=>{if(e.preventDefault(),!i.trim()&&!l)return void b("Veuillez \xe9crire un message ou ajouter une image");m(!0),b("");try{let e=new FormData;e.append("content",i),l&&e.append("image",l),(null==a?void 0:a.user)&&(e.append("userName",a.user.name||"Utilisateur anonyme"),e.append("userAvatar",a.user.image||""),e.append("userId",a.user.id||"")),(await fetch("/api/discord/message",{method:"POST",body:e})).ok?(w(!0),n(""),o(null),d(null),setTimeout(()=>{w(!1),r()},2e3)):b("Erreur lors de l'envoi du message")}catch(e){b("Erreur lors de l'envoi du message")}finally{m(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-end p-4",children:(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg shadow-2xl w-full max-w-md animate-in slide-in-from-bottom-5 fade-in-0 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(x.A,{size:18,className:"text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-semibold",children:"Message Discord"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Support serveur"})]})]}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(p.A,{size:20})})]}),(null==a?void 0:a.user)&&(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-800/50 border-b border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[a.user.image&&(0,s.jsx)("img",{src:a.user.image,alt:a.user.name||"Avatar",className:"w-8 h-8 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"text-white text-sm font-medium",children:["Envoy\xe9 par ",a.user.name||"Utilisateur"]}),(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Depuis ZTVPlus"})]})]})}),(0,s.jsx)("div",{className:"p-4",children:j?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(f.A,{size:24,className:"text-green-500"})}),(0,s.jsx)("p",{className:"text-green-400 font-medium",children:"Message envoy\xe9 avec succ\xe8s !"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Vous serez redirig\xe9 dans 2 secondes..."})]}):(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[c&&(0,s.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:c,alt:"Aper\xe7u de l'image",className:"w-full h-32 object-cover"}),(0,s.jsx)("button",{type:"button",onClick:()=>{o(null),d(null),b("")},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded-full transition-colors",children:(0,s.jsx)(p.A,{size:16})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("textarea",{value:i,onChange:e=>n(e.target.value),placeholder:"\xc9crivez votre message ici...",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",maxLength:1e3}),(0,s.jsx)("div",{className:"text-right mt-1",children:(0,s.jsxs)("span",{className:"text-gray-400 text-xs",children:[i.length,"/1000"]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg cursor-pointer transition-colors",children:[(0,s.jsx)(v.A,{size:16}),(0,s.jsx)("span",{className:"text-sm",children:"Joindre une image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){if(r.size>8388608)return void b("L'image ne doit pas d\xe9passer 8MB");if(!r.type.startsWith("image/"))return void b("Le fichier doit \xeatre une image");o(r);let e=new FileReader;e.onload=e=>{var t;d(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(r)}},className:"hidden"})]}),l&&(0,s.jsxs)("span",{className:"text-gray-400 text-xs",children:[l.name," (",(l.size/1024/1024).toFixed(2),"MB)"]})]}),y&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-red-400 text-sm",children:y})}),(0,s.jsx)("button",{type:"submit",disabled:u||!i.trim()&&!l,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Envoi en cours..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{size:16}),"Envoyer le message"]})})]})})]})}):null}var b=r(2483);let j=[{icon:a.A,label:"Home",href:"/"},{icon:i.A,label:"Search",href:"/search"},{icon:n.A,label:"Support",href:"/chat"}];function w(){var e;let t=(0,m.usePathname)(),{data:r}=(0,h.useSession)(),[a,i]=(0,g.useState)(!1),[n,d]=(0,g.useState)(!1),[x,p]=(0,g.useState)(!1),f=async()=>{i(!0),await (0,h.signOut)({callbackUrl:"/"}),i(!1)};return(0,s.jsxs)("div",{className:"fixed left-0 top-0 h-full w-20 bg-black flex flex-col items-center py-8 justify-between z-50",children:[(0,s.jsx)("div",{className:"flex flex-col items-center space-y-8",children:j.map(e=>{let r=e.icon,a=t===e.href;return"Support"===e.label?(0,s.jsxs)("button",{onClick:()=>p(!0),className:"group relative p-3 rounded-lg transition-all duration-200 text-gray-400 hover:text-white hover:bg-gray-800",children:[(0,s.jsx)(r,{size:24}),(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:e.label})]},"support"):(0,s.jsxs)(u(),{href:e.href,className:"group relative p-3 rounded-lg transition-all duration-200 ".concat(a?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,s.jsx)(r,{size:24}),(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:e.label})]},e.href)})}),(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(null==r||null==(e=r.user)?void 0:e.image)?(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("img",{src:r.user.image,alt:r.user.name||"Profile",className:"w-10 h-10 rounded-full border-2 border-gray-700 group-hover:border-indigo-500 transition-colors duration-200 cursor-pointer",onClick:f,title:"Se d\xe9connecter"}),(0,s.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[r.user.name||"Profil"," (cliquer pour d\xe9connexion)"]}),a&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})})]}):(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center text-gray-400",children:(0,s.jsx)(l.A,{size:20})}),(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:"Non connect\xe9"})]}),r&&(0,s.jsxs)("button",{onClick:f,disabled:a,className:"group relative p-3 rounded-lg transition-all duration-200 text-gray-400 hover:text-red-500 hover:bg-red-500/10 disabled:opacity-50 disabled:cursor-not-allowed",title:"Se d\xe9connecter",children:[(0,s.jsx)(o,{size:24}),(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:"D\xe9connexion"}),a&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"})})]}),(0,s.jsxs)(u(),{href:"/discord",className:"group relative p-3 rounded-lg transition-all duration-200 ".concat("/discord"===t?"bg-gray-800 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,s.jsx)(c.A,{size:24}),(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:"Discord"})]})]}),(0,s.jsx)(y,{isOpen:n,onClose:()=>d(!1)}),(0,s.jsx)(b.A,{isOpen:x,onClose:()=>p(!1)})]})}},583:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},638:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},1188:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},1296:(e,t,r)=>{"use strict";function s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}r.d(t,{A:()=>a});var a=function e(t,r){function a(e,a,i){if("undefined"!=typeof document){"number"==typeof(i=s({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var l in i)i[l]&&(n+="; "+l,!0!==i[l]&&(n+="="+i[l].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+n}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],s={},a=0;a<r.length;a++){var i=r[a].split("="),n=i.slice(1).join("=");try{var l=decodeURIComponent(i[0]);if(s[l]=t.read(n,l),e===l)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){a(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},1432:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(2501),a=r(1308);function i(e){let{children:t}=e;return(0,s.jsx)(a.SessionProvider,{children:t})}},1910:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var s=r(1296);let a={expires:365,secure:!0,sameSite:"strict",domain:void 0},i={getWatchHistory:()=>{try{let e=s.A.get("watch-history");return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing watch history from cookie:",e),[]}},setWatchHistory:e=>{try{s.A.set("watch-history",JSON.stringify(e),a)}catch(e){console.error("Error saving watch history to cookie:",e)}},addToWatchHistory:e=>{let t=i.getWatchHistory().filter(t=>!(t.id===e.id&&(!e.episode||t.episode&&t.episode.season===e.episode.season&&t.episode.episode===e.episode.episode))),r=[e,...t].slice(0,50);i.setWatchHistory(r)},removeFromWatchHistory:(e,t)=>{let r=i.getWatchHistory().filter(r=>!(r.id===e&&(!t||r.episode&&r.episode.season===t.season&&r.episode.episode===t.episode)));i.setWatchHistory(r)},clearWatchHistory:()=>{s.A.remove("watch-history")},getSeriesPreferences:e=>{try{let t=s.A.get("series-".concat(e,"-preferences"));return t?JSON.parse(t):null}catch(e){return console.error("Error parsing series preferences from cookie:",e),null}},setSeriesPreferences:(e,t)=>{try{s.A.set("series-".concat(e,"-preferences"),JSON.stringify(t),a)}catch(e){console.error("Error saving series preferences to cookie:",e)}},migrateFromLocalStorage:()=>{try{let e=localStorage.getItem("watch-history");e&&!s.A.get("watch-history")&&(s.A.set("watch-history",e,a),localStorage.removeItem("watch-history")),Object.keys(localStorage).forEach(e=>{if(e.startsWith("series-")&&e.endsWith("-preferences")){let t=localStorage.getItem(e);t&&(s.A.set(e,t,a),localStorage.removeItem(e))}}),localStorage.getItem("watchHistory")&&localStorage.removeItem("watchHistory")}catch(e){console.error("Error during migration from localStorage:",e)}}}},1928:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2156:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},2483:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(2501),a=r(7841),i=r(8267),n=r(1928),l=r(638),o=r(1188),c=r(1308);function d(e){let{isOpen:t,onClose:r}=e,{data:d}=(0,c.useSession)(),[u,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(null),[x,p]=(0,a.useState)(null),[f,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(""),[j,w]=(0,a.useState)(!1),N=async e=>{if(e.preventDefault(),!u.trim()&&!h)return void b("Veuillez \xe9crire un message ou ajouter une image");v(!0),b("");try{let e=new FormData;e.append("content",u),h&&e.append("image",h),(null==d?void 0:d.user)&&(e.append("userName",d.user.name||"Utilisateur anonyme"),e.append("userAvatar",d.user.image||""),e.append("userId",d.user.id||"")),(await fetch("/api/discord/message",{method:"POST",body:e})).ok?(w(!0),m(""),g(null),p(null),setTimeout(()=>{w(!1),r()},2e3)):b("Erreur lors de l'envoi du message")}catch(e){b("Erreur lors de l'envoi du message")}finally{v(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center p-4 lg:p-8",children:(0,s.jsxs)("div",{className:"w-full bg-gray-900 border border-gray-700 rounded-t-3xl lg:rounded-lg shadow-2xl lg:max-w-2xl lg:max-h-[90vh] lg:h-auto lg:mx-auto animate-in slide-in-from-bottom-5 fade-in-0 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-700 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-sky-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(i.A,{size:18,className:"text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-semibold text-lg",children:"Support ZTVPlus"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Comment pouvons-nous vous aider ?"})]})]}),(0,s.jsxs)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors p-1",children:[(0,s.jsx)(n.A,{size:20,className:"lg:hidden"}),(0,s.jsx)(n.A,{size:24,className:"hidden lg:block"})]})]}),(null==d?void 0:d.user)&&(0,s.jsx)("div",{className:"px-4 lg:px-6 py-3 bg-gray-800/50 border-b border-gray-700 flex-shrink-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[d.user.image&&(0,s.jsx)("img",{src:d.user.image,alt:d.user.name||"Avatar",className:"w-8 h-8 lg:w-10 lg:h-10 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:d.user.name||"Utilisateur"}),(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Connect\xe9 via Discord"})]})]})}),(0,s.jsx)("div",{className:"max-h-[60vh] lg:max-h-[50vh] overflow-y-auto p-4 lg:p-6",children:j?(0,s.jsxs)("div",{className:"text-center py-8 lg:py-12",children:[(0,s.jsxs)("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:[(0,s.jsx)(l.A,{size:24,className:"text-green-500 lg:hidden"}),(0,s.jsx)(l.A,{size:32,className:"text-green-500 hidden lg:block"})]}),(0,s.jsx)("p",{className:"text-green-400 font-medium text-lg",children:"Message envoy\xe9 avec succ\xe8s !"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Vous serez redirig\xe9 dans 2 secondes..."})]}):(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4 lg:space-y-6",children:[x&&(0,s.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:x,alt:"Aper\xe7u de l'image",className:"w-full h-32 lg:h-48 object-cover"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{g(null),p(null),b("")},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 lg:p-2 rounded-full transition-colors",children:[(0,s.jsx)(n.A,{size:16,className:"lg:hidden"}),(0,s.jsx)(n.A,{size:20,className:"hidden lg:block"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"D\xe9crivez votre probl\xe8me ou votre question...",className:"w-full h-32 lg:h-48 bg-gray-800 border border-gray-700 rounded-lg px-3 lg:px-4 py-2 lg:py-3 text-white placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm lg:text-base",maxLength:1e3}),(0,s.jsx)("div",{className:"text-right mt-1",children:(0,s.jsxs)("span",{className:"text-gray-400 text-xs lg:text-sm",children:[u.length,"/1000"]})})]}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 lg:px-4 py-2 lg:py-3 rounded-lg cursor-pointer transition-colors justify-center",children:[(0,s.jsx)(o.A,{size:16,className:"lg:hidden"}),(0,s.jsx)(o.A,{size:20,className:"hidden lg:block"}),(0,s.jsx)("span",{className:"text-sm lg:text-base",children:"Joindre une image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){if(r.size>8388608)return void b("L'image ne doit pas d\xe9passer 8MB");if(!r.type.startsWith("image/"))return void b("Le fichier doit \xeatre une image");g(r);let e=new FileReader;e.onload=e=>{var t;p(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(r)}},className:"hidden"})]}),h&&(0,s.jsxs)("span",{className:"text-gray-400 text-xs lg:text-sm text-center lg:text-left",children:[h.name," (",(h.size/1024/1024).toFixed(2),"MB)"]})]}),y&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 lg:p-4",children:(0,s.jsx)("p",{className:"text-red-400 text-sm lg:text-base",children:y})}),(0,s.jsx)("button",{type:"submit",disabled:f||!u.trim()&&!h,className:"w-full bg-sky-600 hover:bg-sky-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-medium py-3 lg:py-4 px-4 lg:px-6 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm lg:text-base",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 lg:h-5 lg:w-5 border-b-2 border-white"}),"Envoi en cours..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{size:16,className:"lg:hidden"}),(0,s.jsx)(l.A,{size:20,className:"hidden lg:block"}),"Envoyer le message"]})})]})})]})}):null}},3388:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(7841),a={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};let i=((e,t,r,i)=>{let n=(0,s.forwardRef)((r,n)=>{let{color:l="currentColor",size:o=24,stroke:c=2,title:d,className:u,children:m,...h}=r;return(0,s.createElement)("svg",{ref:n,...a[e],width:o,height:o,className:["tabler-icon","tabler-icon-".concat(t),u].join(" "),..."filled"===e?{fill:l}:{strokeWidth:c,stroke:l},...h},[d&&(0,s.createElement)("title",{key:"svg-title"},d),...i.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return n.displayName="".concat(r),n})("outline","brand-discord","BrandDiscord",[["path",{d:"M8 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-0"}],["path",{d:"M14 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833 -1.667 3.5 -3c.667 -1.667 .5 -5.833 -1.5 -11.5c-1.457 -1.015 -3 -1.34 -4.5 -1.5l-.972 1.923a11.913 11.913 0 0 0 -4.053 0l-.975 -1.923c-1.5 .16 -3.043 .485 -4.5 1.5c-2 5.667 -2.167 9.833 -1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2 -2 2 -3",key:"svg-2"}],["path",{d:"M7 16.5c3.5 1 6.5 1 10 0",key:"svg-3"}]])},3504:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(2501),a=r(1308),i=r(3388),n=r(2997),l=r.n(n);function o(){let{data:e,status:t}=(0,a.useSession)();if("loading"===t)return(0,s.jsx)("div",{className:"w-32 h-10 bg-gray-800 rounded-lg animate-pulse"});if(e){var r,n,o;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(null==(r=e.user)?void 0:r.image)&&(0,s.jsx)("img",{src:e.user.image,alt:(null==(n=e.user)?void 0:n.name)||"User",className:"w-8 h-8 rounded-full border border-gray-600"}),(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:null==(o=e.user)?void 0:o.name})]}),(0,s.jsxs)("button",{onClick:()=>(0,a.signOut)({callbackUrl:"/"}),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg text-sm font-medium transition-colors sm:px-4 sm:py-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 sm:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"D\xe9connexion"})]})]})}return(0,s.jsxs)(l(),{href:"/auth/discord",className:"bg-gradient-to-r from-sky-400 to-cyan-500 hover:from-sky-500 hover:to-cyan-600 text-white p-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:scale-105 flex items-center justify-center relative z-50 cursor-pointer sm:px-4 sm:py-2",style:{pointerEvents:"auto"},children:[(0,s.jsx)(i.A,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline ml-2",children:"Connexion Discord"})]})}},3806:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},3813:()=>{},5044:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},5046:(e,t,r)=>{"use strict";var s=r(6218);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5664:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(2501),a=r(7841),i=r(5046);function n(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(0),l=(0,i.usePathname)(),o=(0,i.useRouter)();return((0,a.useEffect)(()=>{let e,r=r=>{let s=r.target.closest("a");if(s&&s.href&&s.href!==window.location.href){let a=s.getAttribute("href");a&&(a.startsWith("/")||a.startsWith(window.location.origin))&&(r.preventDefault(),t(!0),n(0),e=setInterval(()=>{n(t=>t>=90?(clearInterval(e),90):t+30*Math.random())},100),setTimeout(()=>{a.startsWith("/")?o.push(a):window.location.href=a,n(100),setTimeout(()=>{t(!1),n(0),e&&clearInterval(e)},200)},150))}};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r),e&&clearInterval(e)}},[l,o]),e)?(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[100] h-1 bg-gray-800/50 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-sky-500 via-cyan-500 to-sky-500 transition-all duration-300 ease-out",style:{width:"".concat(r,"%")}})}):null}},5711:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(2501),a=r(5044),i=r(2156),n=r(8267),l=r(583),o=r(2997),c=r.n(o),d=r(5046),u=r(1308),m=r(7841),h=r(2483);let g=[{icon:a.A,label:"Home",href:"/"},{icon:i.A,label:"Search",href:"/search"}];function x(){var e;let t=(0,d.usePathname)(),{data:r}=(0,u.useSession)(),[a,i]=(0,m.useState)(!1),[o,x]=(0,m.useState)(!1),p=async()=>{i(!0),await (0,u.signOut)({callbackUrl:"/"}),i(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-black/95 backdrop-blur-sm border-t border-gray-800 z-50 lg:hidden",children:(0,s.jsxs)("div",{className:"flex items-center justify-around py-2",children:[g.map(e=>{let r=e.icon,a=t===e.href;return(0,s.jsxs)(c(),{href:e.href,className:"flex flex-col items-center p-2 rounded-lg transition-all duration-200 ".concat(a?"text-sky-400":"text-gray-400 hover:text-white"),children:[(0,s.jsx)(r,{size:20}),(0,s.jsx)("span",{className:"text-xs mt-1",children:e.label})]},e.href)}),(0,s.jsxs)("button",{onClick:()=>x(!0),className:"flex flex-col items-center p-2 rounded-lg transition-all duration-200 text-gray-400 hover:text-sky-500",children:[(0,s.jsx)(n.A,{size:20}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Support"})]}),r?(0,s.jsx)("button",{onClick:p,disabled:a,className:"flex flex-col items-center p-2 rounded-lg transition-all duration-200 text-gray-400 hover:text-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-red-500"}):(0,s.jsxs)(s.Fragment,{children:[(null==(e=r.user)?void 0:e.image)?(0,s.jsx)("img",{src:r.user.image,alt:r.user.name||"Profile",className:"w-5 h-5 rounded-full"}):(0,s.jsx)(l.A,{size:20}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Profile"})]})}):(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 rounded-lg text-gray-400",children:[(0,s.jsx)(l.A,{size:20}),(0,s.jsx)("span",{className:"text-xs mt-1",children:"Profil"})]})]})}),(0,s.jsx)(h.A,{isOpen:o,onClose:()=>x(!1)})]})}},5735:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(2501),a=r(7841),i=r(1910);function n(e){let{children:t}=e;return(0,a.useEffect)(()=>{i.a.migrateFromLocalStorage()},[]),(0,s.jsx)(s.Fragment,{children:t})}},6692:(e,t,r)=>{"use strict";r.d(t,{Analytics:()=>m});var s=r(7841),a=r(5046),i=r(8490);function n(){return"undefined"!=typeof window}function l(){return"production"}function o(){return"development"===((n()?window.vam:l())||"production")}function c(e){return new RegExp("/".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"(?=[/?#]|$)"))}function d(e){return(0,s.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,s.useEffect)(()=>{var t;!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!0};if(!n())return;!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";if("auto"===e){window.vam=l();return}window.vam=e}(t.mode),window.va||(window.va=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(window.vaq=window.vaq||[]).push(t)}),t.beforeSend&&(null==(e=window.va)||e.call(window,"beforeSend",t.beforeSend));let r=t.scriptSrc?t.scriptSrc:o()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?"".concat(t.basePath,"/insights/script.js"):"/_vercel/insights/script.js";if(document.head.querySelector('script[src*="'.concat(r,'"]')))return;let s=document.createElement("script");s.src=r,s.defer=!0,s.dataset.sdkn="@vercel/analytics"+(t.framework?"/".concat(t.framework):""),s.dataset.sdkv="1.5.0",t.disableAutoTrack&&(s.dataset.disableAutoTrack="1"),t.endpoint?s.dataset.endpoint=t.endpoint:t.basePath&&(s.dataset.endpoint="".concat(t.basePath,"/insights")),t.dsn&&(s.dataset.dsn=t.dsn),s.onerror=()=>{let e=o()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log("[Vercel Web Analytics] Failed to load script from ".concat(r,". ").concat(e))},o()&&!1===t.debug&&(s.dataset.debug="false"),document.head.appendChild(s)}({framework:e.framework||"react",basePath:null!=(t=e.basePath)?t:function(){if(void 0!==i&&void 0!==i.env)return i.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,s.useEffect)(()=>{e.route&&e.path&&function(e){var t;let{route:r,path:s}=e;null==(t=window.va)||t.call(window,"pageview",{route:r,path:s})}({route:e.route,path:e.path})},[e.route,e.path]),null}function u(e){let{route:t,path:r}=(()=>{let e=(0,a.useParams)(),t=(0,a.useSearchParams)(),r=(0,a.usePathname)();return e?{route:function(e,t){if(!e||!t)return e;let r=e;try{let e=Object.entries(t);for(let[t,s]of e)if(!Array.isArray(s)){let e=c(s);e.test(r)&&(r=r.replace(e,"/[".concat(t,"]")))}for(let[t,s]of e)if(Array.isArray(s)){let e=c(s.join("/"));e.test(r)&&(r=r.replace(e,"/[...".concat(t,"]")))}return r}catch(t){return e}}(r,Object.keys(e).length?e:Object.fromEntries(t.entries())),path:r}:{route:null,path:r}})();return s.createElement(d,{path:r,route:t,...e,basePath:function(){if(void 0!==i&&void 0!==i.env)return i.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}(),framework:"next"})}function m(e){return s.createElement(s.Suspense,{fallback:null},s.createElement(u,{...e}))}},8152:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3813,23)),Promise.resolve().then(r.bind(r,3504)),Promise.resolve().then(r.bind(r,5711)),Promise.resolve().then(r.bind(r,5735)),Promise.resolve().then(r.bind(r,5664)),Promise.resolve().then(r.bind(r,1432)),Promise.resolve().then(r.bind(r,545)),Promise.resolve().then(r.bind(r,6692)),Promise.resolve().then(r.t.bind(r,2997,23))},8267:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5143).A)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]])}},e=>{e.O(0,[797,879,308,698,573,358],()=>e(e.s=8152)),_N_E=e.O()}]);