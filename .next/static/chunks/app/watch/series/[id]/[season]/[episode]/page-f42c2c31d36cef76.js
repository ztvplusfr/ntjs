(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{624:(e,s,t)=>{"use strict";t.d(s,{default:()=>f});var a=t(2501),r=t(7841),n=t(5046),l=t(1346),i=t(5307),o=t(6660),c=t(2997),d=t.n(c),u=t(7),m=t(9289),g=t(974),x=t(1910);async function p(e){let s="f3d757824f08ea2cff45eb8f47ca3a1e";if(!s)return console.error("TMDB API key is not configured"),null;try{let t=await fetch("https://api.themoviedb.org/3/tv/".concat(e,"?api_key=").concat(s,"&language=fr-FR"));if(!t.ok)return console.error("TMDB API error: ".concat(t.status," ").concat(t.statusText)),null;return await t.json()}catch(e){return console.error("Error fetching serie details:",e),null}}async function h(e,s,t){let a="f3d757824f08ea2cff45eb8f47ca3a1e";if(!a)return console.error("TMDB API key is not configured"),null;try{let r=await fetch("https://api.themoviedb.org/3/tv/".concat(e,"/season/").concat(s,"/episode/").concat(t,"?api_key=").concat(a,"&language=fr-FR"));if(!r.ok)return console.error("TMDB API error: ".concat(r.status," ").concat(r.statusText)),null;return await r.json()}catch(e){return console.error("Error fetching episode details:",e),null}}async function v(e){try{let s=await fetch("/api/series/".concat(e));if(!s.ok)return console.error("API error: ".concat(s.status," ").concat(s.statusText)),null;return await s.json()}catch(e){return console.error("Error fetching series videos:",e),null}}function f(){var e,s,t,c,f,y,b,j,N,w,_,S;let k=(0,n.useParams)(),A=(0,n.useSearchParams)(),{id:P,season:I,episode:E}=k,[C,q]=(0,r.useState)(!0),[F,R]=(0,r.useState)(""),[T,z]=(0,r.useState)(null),[D,V]=(0,r.useState)(null),[L,B]=(0,r.useState)(null),[O,M]=(0,r.useState)(null),[U,H]=(0,r.useState)("");if((0,r.useEffect)(()=>{let e=async()=>{q(!0),R(""),console.log("Loading data for:",{id:P,season:I,episode:E});try{H(window.location.href);let a=await p(P);if(!a)return void R("S\xe9rie non trouv\xe9e");z(a);let r=await h(P,parseInt(I),parseInt(E));r&&V(r);let n=await v(P);if(n){var e,s,t;B(n);let a=null==(e=n.season[I])?void 0:e.episodes[E];if((null==a||null==(s=a.videos)?void 0:s.length)>0){let e=a.videos.map((e,s)=>({...e,id:e.id||"".concat(P,"-s").concat(I,"e").concat(E,"-video-").concat(s),hasAds:1===e.pub,server:e.name,serverIndex:s+1})),s={...n};(null==(t=s.season[I])?void 0:t.episodes[E])&&(s.season[I].episodes[E].videos=e),B(s);let r=x.a.getSeriesPreferences(P),l=e[0],i=A.get("server"),o=A.get("lang"),c=A.get("quality"),d=A.get("videoId");if(i&&o&&c){let s=e.find(e=>e.server===i&&e.lang===o&&e.quality===c&&(!d||e.id===d));s&&(l=s)}else if(r){let s=e.find(e=>e.server===r.server&&e.lang===r.language&&e.quality===r.quality);s&&(l=s)}M(l)}}}catch(e){R("Erreur lors du chargement"),console.error(e)}finally{q(!1)}};P&&I&&E&&e()},[P,I,E,A]),(0,r.useEffect)(()=>{if(O&&P){let e={id:P,language:O.lang,quality:O.quality,autoPlay:!0,subtitles:!1,server:O.server};x.a.setSeriesPreferences(P,e)}},[O,P,I,E,T,D]),C)return(0,a.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-gray-700 border-t-sky-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Chargement..."})]})});if(F||!T)return(0,a.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-400 text-lg mb-4",children:F}),(0,a.jsx)(d(),{href:"/series/".concat(P,"-").concat((null==T||null==(S=T.name)?void 0:S.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]/g,""))||P),className:"px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors",children:"Retour \xe0 la s\xe9rie"})]})});let W=T.backdrop_path?"https://image.tmdb.org/t/p/original".concat(T.backdrop_path):null,Z=T.poster_path?"https://image.tmdb.org/t/p/w500".concat(T.poster_path):"/placeholder-poster.jpg",G=(null==D?void 0:D.still_path)?"https://image.tmdb.org/t/p/w1280".concat(D.still_path):W;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{title:"".concat(T.name," S").concat(I,"E").concat(E," - ").concat((null==D?void 0:D.name)||"\xc9pisode ".concat(E)," en streaming HD gratuit"),description:(null==D?void 0:D.overview)||"Regarder ".concat(T.name," Saison ").concat(I," \xc9pisode ").concat(E," en streaming HD gratuit sur ZTVPlus. ").concat(T.number_of_seasons?"".concat(T.number_of_seasons," saison").concat(T.number_of_seasons>1?"s":"","."):""," ").concat((null==(e=T.genres)?void 0:e.map(e=>e.name).slice(0,3).join(", "))||""),keywords:[T.name,"streaming","gratuit","s\xe9rie","VF","VOSTFR","saison ".concat(I),"\xe9pisode ".concat(E),(null==D?void 0:D.name)||"",...(null==(s=T.genres)?void 0:s.map(e=>e.name.toLowerCase()))||[],null==(t=T.first_air_date)?void 0:t.split("-")[0]].filter(Boolean).join(", "),image:G||Z,url:U,type:"series",releaseDate:(null==D?void 0:D.air_date)||T.first_air_date,genres:null==(c=T.genres)?void 0:c.map(e=>e.name),duration:(null==D?void 0:D.runtime)?"".concat(60*D.runtime):void 0}),(0,a.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[W&&(0,a.jsx)("div",{className:"fixed inset-0 -z-10",children:(0,a.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(".concat(W,")")},children:(0,a.jsx)("div",{className:"absolute inset-0 bg-black/90"})})}),(0,a.jsx)("div",{className:"relative z-10 px-4 py-4",children:(0,a.jsx)("div",{className:"max-w-7xl",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d(),{href:"/series/".concat(P,"-").concat(T.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-"),"?season=").concat(I),className:"text-gray-300 hover:text-white transition-colors",children:"← Retour \xe0 la s\xe9rie"}),(0,a.jsx)("span",{className:"text-gray-500",children:"|"}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:T.name})]})})}),(0,a.jsx)("div",{className:"relative z-10 px-4 pb-8 w-full",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(m.default,{type:"series",series:{id:P,name:T.name,poster_path:T.poster_path,backdrop_path:T.backdrop_path},season:parseInt(I),episode:parseInt(E),episodeTitle:null==D?void 0:D.name,video:O||void 0}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 w-full",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 w-full",children:[O?(0,a.jsx)(u.default,{video:O,movie:{id:P,title:"".concat(T.name," - S").concat(I,"E").concat(E),type:"series",seriesName:T.name,season:parseInt(I),episode:parseInt(E),episodeTitle:null==D?void 0:D.name,poster:Z,seriesPoster:Z,backdrop_path:G},allVideos:(null==L||null==(y=L.season[I])||null==(f=y.episodes[E])?void 0:f.videos)||[]}):(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg aspect-video flex items-center justify-center w-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.A,{className:"w-8 h-8 text-gray-600"})}),(0,a.jsx)("h2",{className:"text-xl font-medium mb-2",children:"Aucune vid\xe9o disponible"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Cet \xe9pisode n'est pas disponible en streaming pour le moment."})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mt-4",children:[(0,a.jsxs)(d(),{href:"/watch/series/".concat(P,"/").concat(I,"/").concat(parseInt(E)-1),className:"p-2 rounded-lg transition-colors ".concat(parseInt(E)>1?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-900 text-gray-600 cursor-not-allowed pointer-events-none"),"aria-disabled":1>=parseInt(E),children:[(0,a.jsx)(i.A,{size:20,className:"sm:hidden"}),(0,a.jsxs)("span",{className:"hidden sm:flex items-center gap-2",children:[(0,a.jsx)(i.A,{size:20}),"\xc9pisode pr\xe9c\xe9dent"]})]}),(0,a.jsx)(d(),{href:"/series/".concat(P,"-").concat(T.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-"),"?season=").concat(I),className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"\xc9pisodes"}),(0,a.jsxs)(d(),{href:"/watch/series/".concat(P,"/").concat(I,"/").concat(parseInt(E)+1),className:"p-2 rounded-lg transition-colors ".concat((null==L||null==(b=L.season[I])?void 0:b.episodes[(parseInt(E)+1).toString()])?"bg-sky-500 hover:bg-sky-600 text-white":"bg-gray-900 text-gray-600 cursor-not-allowed pointer-events-none"),"aria-disabled":!(null==L||null==(j=L.season[I])?void 0:j.episodes[(parseInt(E)+1).toString()]),children:[(0,a.jsx)(o.A,{size:20,className:"sm:hidden"}),(0,a.jsxs)("span",{className:"hidden sm:flex items-center gap-2",children:["\xc9pisode suivant",(0,a.jsx)(o.A,{size:20})]})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1 w-full",children:C?(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 w-full",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-800 rounded w-1/3"}),(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-20 bg-gray-800 rounded"},e))})]})}):(null==L||null==(w=L.season[I])||null==(N=w.episodes[E])?void 0:N.videos)&&L.season[I].episodes[E].videos.length>0?(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Sources disponibles"}),(0,a.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:L.season[I].episodes[E].videos.map((e,s)=>{let t=!!(O&&e.id===O.id);return(0,a.jsxs)("div",{className:"block p-3 rounded-lg border transition-all w-full cursor-pointer ".concat(t?"bg-red-600/30 border-red-500 shadow-lg shadow-red-500/20":"bg-gray-800 border-gray-700 hover:border-gray-600 hover:bg-gray-750"),onClick:()=>{M(e)},children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse mr-2"}),(0,a.jsx)("span",{className:"text-xs text-red-400 font-medium",children:"EN COURS"})]}),(0,a.jsx)("div",{className:"font-medium text-sm ".concat(t?"text-red-400":"text-white"),children:e.name})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("1080p"===e.quality?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"),children:e.quality}),(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs text-gray-300",children:"vf"===e.lang?"Version Fran\xe7aise":"vostfr"===e.lang?"Version Originale Sous-titr\xe9e":e.lang.toUpperCase()}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(1===e.pub?"bg-red-600/20 text-red-400":"bg-green-600/20 text-green-400"),children:1===e.pub?"Ads":"No Ads"})]}),t&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-red-400 font-medium flex items-center",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z"})}),"Lecture en cours"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e.quality," • ","vf"===e.lang?"Version Fran\xe7aise":"vostfr"===e.lang?"Version Originale Sous-titr\xe9e":e.lang.toUpperCase()]})]})]},e.id)})})]}):(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Sources disponibles"}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.A,{className:"w-8 h-8 text-gray-600"})}),(0,a.jsx)("p",{className:"text-gray-400",children:"Aucune source disponible"})]})]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 w-full",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["\xc9pisode ",E,": ",(null==D?void 0:D.name)||"\xc9pisode ".concat(E)]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,a.jsxs)("span",{className:"px-3 py-1 bg-gray-800 rounded-full text-sm",children:["S",parseInt(I).toString().padStart(2,"0"),"E",parseInt(E).toString().padStart(2,"0")]}),(null==D?void 0:D.air_date)&&(0,a.jsx)("span",{className:"px-3 py-1 bg-gray-800 rounded-full text-sm",children:new Date(D.air_date).toLocaleDateString("fr-FR")}),(null==D?void 0:D.runtime)&&(0,a.jsxs)("span",{className:"px-3 py-1 bg-gray-800 rounded-full text-sm",children:[D.runtime,"min"]}),(0,a.jsxs)("span",{className:"flex items-center px-3 py-1 bg-gray-800 rounded-full text-sm",children:[(0,a.jsx)("span",{className:"text-yellow-400 mr-1",children:"★"}),(0,a.jsx)("span",{className:"font-medium",children:null==(_=T.vote_average)?void 0:_.toFixed(1)})]})]}),(null==D?void 0:D.overview)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Synopsis"}),(0,a.jsx)("p",{className:"text-gray-300 leading-relaxed",children:D.overview})]})]}),(0,a.jsx)("div",{children:C?(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-32 bg-gray-800 rounded"}),(0,a.jsx)("div",{className:"h-20 bg-gray-800 rounded"})]}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Informations"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-400",children:[(0,a.jsxs)("p",{children:["S\xe9rie: ",T.name]}),(0,a.jsxs)("p",{children:["Saison: ",I]}),(0,a.jsxs)("p",{children:["\xc9pisode: ",E]})]})]})})})]})]})})]})]})}},974:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(7841);function r(e){let{title:s,description:t,keywords:r,image:n,url:l,type:i="movie",releaseDate:o,genres:c,duration:d}=e;return(0,a.useEffect)(()=>{document.title=s;let e=(e,s)=>{let t=document.querySelector('meta[name="'.concat(e,'"]'))||document.querySelector('meta[property="'.concat(e,'"]'));t||((t=document.createElement("meta")).setAttribute(e.startsWith("og:")||e.startsWith("twitter:")?"property":"name",e),document.head.appendChild(t)),t.setAttribute("content",s)};e("description",t),r&&e("keywords",r),e("og:title",s),e("og:description",t),e("og:url",l||window.location.href),e("og:site_name","ZTVPlus - Streaming Platform"),e("og:locale","fr_FR"),e("og:type","movie"===i?"video.movie":"video.tv_show"),n&&(e("og:image",n),e("og:image:alt","".concat(s," - Poster officiel")),e("og:image:width","500"),e("og:image:height","750")),o&&e("og:release_date",o),d&&e("og:duration",d),c&&c.length>0&&e("og:tags",c.join(",")),e("twitter:card","summary_large_image"),e("twitter:title",s),e("twitter:description",t),n&&e("twitter:image",n);let a=document.querySelector('link[rel="canonical"]');a||((a=document.createElement("link")).setAttribute("rel","canonical"),document.head.appendChild(a)),a.setAttribute("href",l||window.location.href)},[s,t,r,n,l,i,o,c,d]),null}},1346:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5143).A)("tv",[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]])},5046:(e,s,t)=>{"use strict";var a=t(6218);t.o(a,"notFound")&&t.d(s,{notFound:function(){return a.notFound}}),t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5307:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5143).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6660:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5143).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7384:(e,s,t)=>{Promise.resolve().then(t.bind(t,624))}},e=>{e.O(0,[879,895,698,573,358],()=>e(e.s=7384)),_N_E=e.O()}]);